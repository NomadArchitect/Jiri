{
  "comments": [
    {
      "key": {
        "uuid": "eb319b49_0c9857c9",
        "filename": "project/project.go",
        "patchSetId": 2
      },
      "lineNbr": 348,
      "author": {
        "id": 5080
      },
      "writtenOn": "2017-12-13T20:30:12Z",
      "side": 1,
      "message": "I\u0027m trying to see where CreateSnapshot is called with a non-nil value for Hooks. Can you point me at it?\n\nAlso, IWBN to document in the function comment how Hooks is to be used. E.g., when would one pass nil vs non-nil?",
      "revId": "8e32445b9bcb0437bff66b04842ef4e1a6e758f3",
      "serverId": "ccdefb6c-23ea-33ff-848c-339fc6ca2269",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "f5deb98e_c2b1103f",
        "filename": "project/project.go",
        "patchSetId": 2
      },
      "lineNbr": 348,
      "author": {
        "id": 5195
      },
      "writtenOn": "2017-12-13T20:34:01Z",
      "side": 1,
      "message": "here\nhttps://fuchsia-review.googlesource.com/c/jiri/+/102824/3/project/project.go#397\n\nalso added comment",
      "parentUuid": "eb319b49_0c9857c9",
      "revId": "8e32445b9bcb0437bff66b04842ef4e1a6e758f3",
      "serverId": "ccdefb6c-23ea-33ff-848c-339fc6ca2269",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "af1407df_9379dec4",
        "filename": "project/project.go",
        "patchSetId": 2
      },
      "lineNbr": 348,
      "author": {
        "id": 5080
      },
      "writtenOn": "2017-12-13T21:00:11Z",
      "side": 1,
      "message": "Ah, thanks.\n\nThere\u0027s an assumption that the hooks from the snapshot file is non-nil, which may be true in practice, but one could improve on this. [Or is there a hard rule that hooks will always be non-nil?]\n\nOne thought is to move the call to LoadManifestFile into the caller. Then there\u0027s no need question as to whether hooks has been provided or not: CreateSnapshot just uses the hooks it has been given.\n\nAnother thought, which upon reflection I\u0027m liking less but am including for completelness sake, is to split CreateSnapshot into two:\nCreateSnapshot - always calls LoadManifestFile to get the hooks\nCreateSnapshotWithHooks - uses the hooks it\u0027s given\n\nAnd then have the \"got manifest from url\" path call the latter. Alas going through the code employing this doesn\u0027t look simple. There\u0027s two sources of data here (manifest vs url - IIUC!) and the code is mixing them.\n\nI don\u0027t want to drag this review out just for this bug fix, maybe I\u0027m missing something, so I\u0027ll just +1 this and see if someone maybe more familiar with the code has a thought.",
      "parentUuid": "f5deb98e_c2b1103f",
      "revId": "8e32445b9bcb0437bff66b04842ef4e1a6e758f3",
      "serverId": "ccdefb6c-23ea-33ff-848c-339fc6ca2269",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "1837c69f_9a0beace",
        "filename": "project/project.go",
        "patchSetId": 2
      },
      "lineNbr": 348,
      "author": {
        "id": 5195
      },
      "writtenOn": "2017-12-13T21:38:01Z",
      "side": 1,
      "message": "even if there are no hooks in snapshot file LoadManifestFile function will return empty map to it would always be non-nil\n\nI know it is complex, it is on my radar to simplify this logic, but not sure If i can do it right now",
      "parentUuid": "af1407df_9379dec4",
      "revId": "8e32445b9bcb0437bff66b04842ef4e1a6e758f3",
      "serverId": "ccdefb6c-23ea-33ff-848c-339fc6ca2269",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "6abd9e45_31085690",
        "filename": "project/project.go",
        "patchSetId": 2
      },
      "lineNbr": 348,
      "author": {
        "id": 5080
      },
      "writtenOn": "2017-12-13T22:32:35Z",
      "side": 1,
      "message": "Fair enough. Keep on hacking!",
      "parentUuid": "1837c69f_9a0beace",
      "revId": "8e32445b9bcb0437bff66b04842ef4e1a6e758f3",
      "serverId": "ccdefb6c-23ea-33ff-848c-339fc6ca2269",
      "unresolved": false
    }
  ]
}